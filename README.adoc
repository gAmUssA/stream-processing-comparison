= Stream Processing Comparison: Apache Kafka® Streams vs Apache Flink
:toc:
:icons: font
:source-highlighter: highlight.js
:experimental:

This project provides a comparison between Apache Kafka® Streams and Apache Flink stream processing frameworks.

== Project Structure

The project consists of four main modules:

* `common` -- Shared data models and utilities
* `kafka-streams-processor` -- Apache Kafka® Streams implementation
* `flink-processor` -- Apache Flink implementation
* `data-generator` -- Test data generator

== Technology Stack

[cols="1,1"]
|===
|Technology |Version

|Java
|21

|Apache Kafka®
|3.9.0 (KRaft mode)

|Apache Flink
|1.20.0

|Gradle
|8.5
|===

== Prerequisites

To run this project, you need:

* JDK 21 or later
* Docker and Docker Compose
* Gradle 8.5 or later

== Building and Running

The project uses a Makefile for common operations. Here are the available commands:

[source,bash]
----
make help          # Show help message with all available commands
make build         # Build all applications
make docker-up     # Start all containers (builds first)
make docker-down   # Stop all containers
make kafka-ready   # Wait for Kafka to be ready
make clean         # Clean up everything (stops containers and prunes Docker)
----

=== Quick Start

1. Build and start all services:
+
[source,bash]
----
make docker-up
----

2. The following services will be started:
* Kafka broker (KRaft mode) at `localhost:29092` (external) and `kafka:9092` (internal)
* Data generator service that produces flight events to the `flight-status` topic

== Module Details

=== Common Module
Contains shared data models:

* `FlightEvent` - Represents flight events with properties like flight number, airline, airports, departure times, and status
* `RouteDelayStats` - Maintains statistics about delays for specific routes, used for analyzing flight patterns

=== Data Generator
Generates simulated flight events and publishes them to Kafka topics. Features include:

* Realistic flight data generation using major airports and airlines
* Random delay simulation
* Flight status updates
* Configurable generation rates

Configuration options:

[cols="2,1,2"]
|===
|Parameter |Environment Variable |Default Value

|Bootstrap Servers
|KAFKA_BOOTSTRAP_SERVERS
|localhost:29092

|Kafka Topic
|KAFKA_TOPIC
|flight-status

|Generation Interval (ms)
|GENERATION_INTERVAL_MS
|1000

|Number of Active Flights
|NUMBER_OF_FLIGHTS
|10
|===

=== Kafka Streams Processor
Implementation of stream processing using Apache Kafka® Streams API. Features:

* Real-time flight delay monitoring
* Route-based delay statistics
* High-risk route detection
* Exactly-once processing guarantee

=== Flink Processor
Implementation of stream processing using Apache Flink (in progress).

== Docker Setup

The project uses Docker Compose with the following services:

=== Kafka
* Uses Apache Kafka® 3.9.0 in KRaft mode (no ZooKeeper)
* Exposes ports 9092 (internal) and 29092 (external)
* Configured with transaction support and minimal replication for development

=== Data Generator
* Built from Eclipse Temurin JRE 21 base image
* Automatically starts when Kafka is healthy
* Configurable through environment variables
* Produces flight events to the configured Kafka topic

== Development

=== Running Tests
[source,bash]
----
./gradlew test
----

=== Code Style
The project uses:

* Gradle with Kotlin DSL for build scripts
* AsciiDoc for documentation
* GitHub CLI for repository management

== License

This project is licensed under the MIT License - see the link:LICENSE[LICENSE] file for details.
